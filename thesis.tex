\RequirePackage[final]{graphicx}
\documentclass[final]{cwru}

\usepackage[table,xcdraw]{xcolor}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{algorithmicx}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[toc,title]{appendix}
\usepackage{bm}
\usepackage{enumitem}
\usepackage{dirtytalk}
\usepackage{fancyhdr}
\usepackage{geometry}
\usepackage{microtype}
\usepackage[acronym,shortcuts,nonumberlist]{glossaries}
\usepackage{graphicx}
\hypersetup{linktocpage,hidelinks,final,pdfborder=0 0 0,pdfview=FitH}
\usepackage{ifdraft}
\usepackage{lipsum}
\usepackage[utf8]{inputenc}
\usepackage{pdfpages}
\usepackage{placeins}
\usepackage[justification=centering]{caption}
\usepackage{float}
\usepackage{subcaption}
\usepackage{textcomp}
\usepackage{tikz}
\usepackage{hyperref}
\usepackage[capitalize, noabbrev]{cleveref}
% \usepackage{cite}
\usepackage[
  backend=biber,
  style=ieee,
  natbib=true,
  url=false,
  autocite=inline,
]{biblatex}
\addbibresource{citations.bib}

\setlength{\marginparwidth}{2cm}
\usepackage[obeyDraft,colorinlistoftodos]{todonotes}
\usepackage{xifthen}
\graphicspath{{images/}, {assets/}, {figures/}}

\usepackage{xspace}
% Add a period to the end of an abbreviation unless there's one
% already, then \xspace.
\makeatletter
\DeclareRobustCommand\onedot{\futurelet\@let@token\@onedot}
\def\@onedot{\ifx\@let@token.\else.\null\fi\xspace}

\def\eg{\emph{e.g}\onedot} \def\Eg{\emph{E.g}\onedot}
\def\ie{\emph{i.e}\onedot} \def\Ie{\emph{I.e}\onedot}
\def\cf{\emph{c.f}\onedot} \def\Cf{\emph{C.f}\onedot}
\def\etc{\emph{etc}\onedot} \def\vs{\emph{vs}\onedot}
\def\wrt{w.r.t\onedot} \def\dof{d.o.f\onedot}
\def\etal{\emph{et al}\onedot}
\makeatother{}

% previously LO,RE
\fancyhead[LO]{} % remove section names from header

% Pseudocode Definitions
\algnewcommand\Input{\item[\textbf{Input:}]}
\algnewcommand\Output{\item[\textbf{Output:}]}

% argmin and argmax definitions
\DeclareMathOperator*{\argmin}{\arg\min\ }   % rbp
\DeclareMathOperator*{\argmax}{\arg\max\ }   % rbp

% New column types for tables
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>w{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

%% ============
%% TikZ Setup
%% ============

\usetikzlibrary{arrows,automata,positioning,shadows,shapes.geometric}
\tikzset{
  circlenode/.style = {circle, draw=black, text centered},
  rectanglenode/.style = {circlenode, rectangle, text centered,
    text=black, draw},
  subtask/.style = {rectangle, text centered, text=black, draw=black}
}

\tikzstyle{VertexStyle} = [shape = ellipse,
                               minimum width    = 6ex,
                               draw]
\tikzstyle{EdgeStyle} = [->,>=stealth']
\tikzstyle{Expert} =        [
  fill=red,
  fill opacity = 0.5,
  draw opacity = 1.0,
  text opacity = 1.0
]
\tikzstyle{Intermediate} =  [
  fill=violet,
  fill opacity = 0.5,
  draw opacity = 1.0,
  text opacity = 1.0
]
\tikzstyle{Novice} =  [
  fill=blue,
  fill opacity = 0.5,
  draw opacity = 1.0,
  text opacity = 1.0
]

\definecolor{lightblue}{RGB}{173,216,230}

%% ===================
%% Todo Note Commands
%% ===================

\newcommand{\missingref}[2][]{
  \ifdraft{\sethlcolor{green}\hl{#2}}{#2}
\ifthenelse{\isempty{#1}}{}{\todo[color=green, size=\scriptsize]{#1}}}
\newcommand{\reword}[2][]{
  \ifdraft{\sethlcolor{orange}\hl{#2}}{#2}
  \ifthenelse{\isempty{#1}}{}{\todo[color=orange, size=\scriptsize]{#1}}}
\newcommand{\writesection}[1]{
  \todo[color=red,inline]{#1}}

%% ========================
%% Setup new Title Command
%% ========================

\newcommand{\ThesisTitle}{Dynamic Structure Adaptation for Communities of Learning Machines}

%% ===============
%% Glossary Setup
%% ===============

\makeglossaries{}
\input{glossary}
\ifdraft{\glsaddall}

\renewcommand*{\acronymname}{List of Acronyms}

\algnewcommand{\LineComment}[1]{\State \(\triangleright\) #1}
\algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}

%% =================
%% Theorem Commands
%% =================

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]

\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{lemma}[theorem]{Lemma}
\renewcommand\qedsymbol{\(\blacksquare\)}

%% =====================
%% Algorithm Highlights
%% =====================

\def\HiLi{\leavevmode\rlap{\hbox{} to \hsize{\color{yellow!50}\leaders\hrule height .8\baselineskip{} depth .5ex\hfill}}}

%% =================
%% Title Page Setup
%% =================

\setlength{\headheight}{15pt}

\makeatletter

\title{\ThesisTitle}
\author{Your Name}
\newcommand{\graddate}{May, 2022}
\date{\graddate}
\degree{Master of Science}
\doctype{thesis}
\department{Computer and Data Sciences}
\defensedate{\today}

\begin{document}

\advisor{Dr.\ Advisor}
\committee{Dr.\ Member 1}
\committee{Dr.\ Member 2}
\committee{Dr.\ Member 3}


\listoftodos{}

\ifdraft{\newpage}{}

% redefine this because the macro from cwru.cls doesn't work for some reason?
\renewcommand\maketitle{\begin{titlepage}%
    \begin{spacing}{2.0}
      %\newgeometry{left=1in,top=1in,bottom=1in,right=1in}
      \let\footnotesize\small
      \let\footnoterule\relax
      \let \footnote \thanks
      \null\vfil
      \vskip 60\p@
      \begin{center}%
        {\Large\bfseries \textsf{\MakeUppercase{\@title}} \par}%
        \vskip 3em%
          {\large
            \lineskip 3em%
              {\bfseries\textsf{by}} \\
            \begin{tabular}[t]{c}%
              {\bfseries \textsf{\MakeUppercase{\@author}}}
            \end{tabular}\par%
            \vskip 2em%
            \textsf{Submitted in partial fulfillment of the requirements} \\
            \if@proposal
              \textsf{for the dissertation proposal} \\
            \else
              \textsf{for the degree of \@degree} \\
            \fi
            \vskip 2em%
            %Dissertation Advisor: \@advisor \\
            %\vskip 2em%
            \textsf{Department of \@department} \\
            \textsf{CASE WESTERN RESERVE UNIVERSITY} \\
            \vskip 2em%
            \textsf{\@date} \par}
      \end{center}\par
      \@thanks
      \vfil\null
    \end{spacing}
  \end{titlepage}%
  \setcounter{footnote}{0}%
  \global\let\thanks\relax
  \global\let\maketitle\relax
  \global\let\@thanks\@empty
  %\global\let\@author\@empty
  \global\let\@date\@empty
  %\global\let\@title\@empty
  %\global\let\title\relax
  %\global\let\author\relax
  %\global\let\degree\relax
  %\global\let\advisor\relax
  \global\let\department\relax
  \global\let\date\relax
  \global\let\and\relax
  %\restoregeometry
}

\maketitle
\makeapprovalsheet{}

\frontmatter
\tableofcontents

\cleardoublepage{}
\phantomsection{}
\addcontentsline{toc}{chapter}{List of Figures}
\listoffigures{}

% \cleardoublepage{}
% \phantomsection{}
% \addcontentsline{toc}{chapter}{List of Tables}
% \listoftables

\cleardoublepage{}
\phantomsection{}
\addcontentsline{toc}{chapter}{List of Acronyms}
\printglossary[type=\acronymtype]

\cleardoublepage{}
\phantomsection{}
\addcontentsline{toc}{chapter}{Glossary}
\printglossary{}

\begin{abstract}
  what it do
\end{abstract}

\mainmatter{}

\input{chapters/introduction}
\input{chapters/background}
\input{chapters/methods}

\backmatter{}
\cleardoublepage{}
\phantomsection{}
% used with bibtex and cite package
% \addcontentsline{toc}{chapter}{Bibliography}
% \bibliographystyle{ieeetr}
% \bibliography{citations}

% used with biblatex
\printbibliography[heading=bibintoc]{}

\ifdraft{\nocite{*}}

\appendix \renewcommand{\thechapter}{\arabic{chapter}}
\renewcommand{\thesection}{A.\arabic{section}}

\include{chapters/appendix.tex}

\end{document}


